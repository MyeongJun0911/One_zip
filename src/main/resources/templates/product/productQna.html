<!DOCTYPE html>
<html
        xmlns:th="http://www.thymeleaf.org"
        xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
        layout:decorate="~{layout/default}">
<head>
    <title>상품 질문과 답변</title>
</head>
<style layout:fragment="style"></style>

<div layout:fragment="content">
    <section class="px-4 py-8">
        <table class="w-full">
            <tbody>
            <th:block th:each="question, status: ${questions}" class="pb-10">
                <tr class="pb-5 border-b">
                    <td class="text-lg font-semibold" th:text="${question.memberId}"></td>
                    <td class="text-lg font-semibold" th:text="|● ${question.qContent}|"></td>
                </tr>
                <tr class="pb-5 border-b">
                    <td>
                        <div th:if="${question.productAnswer != null}" th:data-product-id="${question.product.id}">
                            <span th:if="${question.productAnswer.aContent != null}" th:text="|답변: ${question.productAnswer.aContent}|"></span>
                            <span th:if="${question.productAnswer.aContent == null}">답변: 답변 대기 중입니다.</span>
                        </div>
                        <div th:if="${question.productAnswer == null}">답변: 답변 대기 중입니다.</div>
                        <span th:if="${question.memberId == member.memberId}">
                <form th:action="@{/product/qnafurcate.do}" name="qnafurcateFrm" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <input type="hidden" th:name="questionerId" th:value="${question.memberId}"/>
                    <input type="hidden" th:name="questionId" th:value="${question.id}"/>
                    <input th:if="${productId != null}" type="hidden" th:name="productId" th:value="${productId}"/>
                    <button type="submit" name="action" value="update" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mr-2">수정</button>
                    <button type="submit" name="action" value="delete" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded">삭제</button>
                </form>
            </span>
                    </td>
                </tr>
            </th:block>

            </tbody>
        </table>
        <button class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded mt-4" th:onclick="|location.href = '@{productQnaCreatePage.do}?id=${productId}';|">문의 작성</button>
        <div id="pagebar" class="mt-4">
            <nav aria-label="Page navigation example">
                <ul class="pagination justify-center">
                    <th:block th:utext="${pagebar}"/>
                </ul>
            </nav>
        </div>
    </section>
</div>

<script layout:fragment="script" th:src="@{/js/product/productQna.js}"></script>
</html>
